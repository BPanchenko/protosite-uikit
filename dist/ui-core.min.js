"use strict";!function(e,t){function n(e){var t=[];return e=Array.from(e),i.forEach(function(n){e.filter(function(e){return e.hasAttribute(n.attr)&&!e[n.reference]}).forEach(function(e){new n(e,e.getAttribute(n.attr)),t.push(e)})}),t}var o=document.documentElement,i=[],r=[],d=window.UI=Object.assign({},e.Events);d.dom=Object.create(e.Events),d.dom.observer=new MutationObserver(function(e){var t={added:[],removed:[]};e.forEach(function(e){if("childList"==e.type){var n=Array.from(e.addedNodes).filter(function(e){return e instanceof HTMLElement}),o=Array.from(e.removedNodes).filter(function(e){return e instanceof HTMLElement});t.added=t.added.concat(n),t.removed=t.removed.concat(o)}}),d.dom.trigger("change",o,t)}),d.Component=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.assert(e instanceof Element,"A component element is not Element"),this.cid=t.uniqueId("component"),this.el=e,this._ensureElement();try{n=t.stringToObject(n)}catch(e){}this.options=n,this.initialize.apply(this,arguments),e[this.constructor.reference]=this},d.Component.extend=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this;return e=n.hasOwnProperty("constructor")?n.constructor:function(){return s.apply(this,arguments)},Object.assign(e,{attr:"ui-"+n.name.toLowerCase(),reference:"_ui"+n.name,selector:"*[ui-"+n.name.toLowerCase()+"]"},s,o),e.prototype=t.create(s.prototype,n),e.prototype.constructor=e,e.__super__=s.prototype,d[n.name]=e,i.push(e),r.push(e.selector),e},t.extend(d.Component.prototype,e.View.prototype),d.dom.on("change",function(e,t){r.length&&n(t.added)}),d.dom.on("ready",function(e){d.dom.observer.observe(e,{childList:!0,subtree:!0}),r.length&&n(e.querySelectorAll(r.join(",")))}),document.addEventListener("DOMContentLoaded",function(){d.dom.trigger("ready",o)})}(Backbone,_),function(e){e.backdrop=new(Backbone.View.extend({name:"BackdropView",tagName:"div",className:"c-backdrop",events:{click:function(e){this.trigger("click",this,e)}},show:function(e){return e||(e={}),document.body.appendChild(this.el),_.isNumber(e.opacity)&&(this.el.style.opacity=e.opacity),_.isNumber(e.zIndex)&&(this.el.style.zIndex=e.zIndex),this.trigger("show",this),this},hide:function(){return this.el.style.opacity=0,this.el.style.zIndex="",setTimeout(function(){this.el.style.opacity="",this.trigger("hide",this);try{document.body.removeChild(this.el)}catch(e){}}.bind(this),160),this}}))}(UI),function(e){e.window=new(Backbone.Model.extend({name:"WindowModel",defaults:{width:0,height:0},_origin:window})),e.container=new(Backbone.Model.extend({name:"ContainerModel",defaults:{width:0,height:0,format:""},initialize:function(){this.listenTo(e.window,"change:width",this.setFormat)},setFormat:function(){var t,n=e.window.get("width");return t=n>=1360?"xdesktop":n>=1180?"desktop":n>=1024?"tablet":n>=768?"tablet-portrait":n>=480?"handset":"handset-portrait",this.set({format:t,height:this.el.offsetHeight,width:this.el.offsetWidth})}}));var t=_.throttle(function(){e.window.set({width:window.innerWidth,height:window.innerHeight})},160);document.addEventListener("DOMContentLoaded",function(){window.UI.container.el=document.body.getElementsByClassName("o-container")[0]}),window.addEventListener("load",function(){window.addEventListener("resize",t,!1),t()},!1)}(UI);