"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();!function(t,e){var i={window:{resize:e.throttle(function(t){ui.window.set({width:window.innerWidth,height:window.innerHeight})},160)}},n=t.View.extend({_name:"BackdropView",tagName:"div",className:"c-backdrop",events:{click:function(t){this.trigger("click",this,t)}},show:function(t){return t||(t={}),document.body.appendChild(this.el),e.isNumber(t.opacity)&&(this.el.style.opacity=t.opacity),e.isNumber(t.zIndex)&&(this.el.style.zIndex=t.zIndex),this.trigger("show",this),this},hide:function(){return this.el.style.opacity=0,this.el.style.zIndex="",setTimeout(function(){this.el.style.opacity="",this.trigger("hide",this);try{document.body.removeChild(this.el)}catch(t){}}.bind(this),160),this}}),s=t.Model.extend({_name:"WindowModel",_origin:window,defaults:{width:0,height:0}}),l=t.Model.extend({_name:"ContainerModel",defaults:{width:0,height:0,format:""},setFormat:function(){var t,e=ui.window.get("width");return t=e>=1360?"xdesktop":e>=1180?"desktop":e>=1024?"tablet":e>=768?"tablet-portrait":e>=480?"handset":"handset-portrait",this.set({format:t,height:this.el.offsetHeight,width:this.el.offsetWidth})}}),a=function(){function i(){_classCallCheck(this,i),this.components=[],this.backdrop=new n,this.window=new s,this.container=new l,this.container.listenTo(this.window,"change:width",this.container.setFormat)}return _createClass(i,[{key:"component",value:function i(n){console.assert(e.isObject(n)||e.isFunction(n),"Error initialization of the component.",n);var i=e.isFunction(n)?new n(this):n;return e.extend(i,t.Events),this.components[e.camelize(i._name)]=i,i.listenTo(this,"ready",i.init),this}}]),i}();e.extend(a.prototype,t.Events),window.ui=new a,document.addEventListener("DOMContentLoaded",function(){window.ui.container.el=document.body.getElementsByClassName("o-container")[0],window.ui.trigger("ready"),window.addEventListener("resize",i.window.resize,!1),i.window.resize()})}(Backbone,_),function(t){function e(){var t=document.createElement("section");return t.classList.add("c-dialog"),t}function i(i){i.preventDefault();var n,s=i.currentTarget,l=e();try{n=_.stringToObject(s.getAttribute("data-ui-dialog"))}catch(t){}if(n.tpl)var a=document.body.querySelector(n.tpl);t.backdrop.show(),document.body.appendChild(l),l.appendChild(a.content.cloneNode(!0)),setTimeout(function(){l.classList.add("is-opened")},0),t._components.dialog.stack.push(l)}return{_name:"dialog",$elements:null,stack:[],init:function(){this.$elements=$("*[data-ui-dialog]"),this.$elements.on("click",i),this.listenTo(t.backdrop,"click",this.remove)},remove:function(){var e=_.last(this.stack);return t.backdrop.hide(),e.classList.remove("is-opened"),e.classList.add("is-closed"),setTimeout(function(){document.body.removeChild(e)},160),this}}}(ui),function(t){var e=_.debounce(function(){var t=$(this),e=t.parents(".c-field").eq(0),i=t.val(),n=t.attr("pattern");if(i){var s=new RegExp(n);s.test(i)?e.addClass("is-valid").removeClass("is-invalid"):e.addClass("is-invalid").removeClass("is-valid")}else e.removeClass("is-valid is-invalid")},150),i=function(t){var e=$(this),i=e.parent(".c-field"),n=i.find(".c-field-value").eq(0),s=e.val();i[s?"addClass":"removeClass"]("is-filled"),n.length?n.text(s):console.error("Не найден элемент значения для поля выбора файла!",e)},n=_.debounce(function(t){var e=$(this),i=e.parent(".c-field"),n=e.val();n&&i.removeClass("is-invalid")},150),s=function(t){var e=$(this),i=e.parent(".c-field"),n=e.siblings(".c-field-input").eq(0),s=e.find(".iconic").eq(0);"eye-closed"==s.data("glyph")?(s.data("glyph","eye-open"),n.attr("type","text")):"eye-open"==s.data("glyph")&&(s.data("glyph","eye-closed"),n.attr("type","password")),"loupe"!=s.data("glyph")||n.val()||(t.preventDefault(),i.addClass("is-invalid"))};t.component({_name:"field",$elements:null,$buttons:null,$inputs:null,init:function(){this.$elements=$(".c-field"),this.$buttons=this.$elements.find(".c-field-button"),this.$inputs=this.$elements.find(".c-field-input"),this.$inputs.filter("*:not([type=file])").on("focus",function(t){var e=$(this).parent(".c-field");e.length&&e.addClass("is-focused")}).on("blur",function(t){var e=$(this),i=e.parent(".c-field"),n=e.val();i.removeClass("is-focused"),i[n?"addClass":"removeClass"]("is-filled")}),this.$inputs.filter("*[pattern]:not([type=email])").on("input",e),this.$inputs.filter("*[pattern][type=email]").on("change",e),this.$inputs.filter("input[type=file]").on("change",i),this.$inputs.filter("input[type=search]").on("change input",n),this.$buttons.on("click",s)}})}(ui),function(t){function e(){this.elems.views.length&&this.elems.views.forEach(function(t,e){t.dataset.active=e==this.i}.bind(this))}function i(){this.elems.indicator.style.left=this.elems.links[this.i].parentNode.offsetLeft+"px",this.elems.indicator.style.width=this.elems.links[this.i].parentNode.offsetWidth+"px"}function n(t){return t.preventDefault(),t.target.classList.contains("ui-tabs-item")?void t.target.getElementsByClassName("ui-tabs-link")[0].click():void(t.target.classList.contains("ui-tabs-link")&&"true"!=t.target.dataset.active&&(this.elems.links.forEach(function(e,i){t.target==e?(e.dataset.active="true",this.i=i):e.dataset.active="false"}.bind(this)),i.call(this),e.call(this),s.call(this)))}function s(){this.elems.views.length&&this.elems.views.forEach(function(e,i){i<this.i?e.style.transform="translate3d(-"+t.win.get("width")+"px,0,0)":i>this.i?e.style.transform="translate3d("+t.win.get("width")+"px,0,0)":e.style.transform=null}.bind(this))}function l(t){if(this.elems.views.length){var e=0;this.elems.views.forEach(function(t){t.offsetHeight>e&&(e=t.offsetHeight)}.bind(this)),this.elems.container.style.height=e+"px"}}function a(){this.elems.views.length&&(this.views_width=this.elems.container.offsetWidth,this.elems.views.forEach(function(t){t.style.width=this.views_width+"px"}.bind(this)))}var o=function(o,c){o instanceof HTMLElement?this.el=o:console.error("Tabs element is not defined."),c=_.extend(c||(c={}),_.stringToObject(this.el.getAttribute(this.attr_name))),this.elems.indicator=this.el.getElementsByClassName("ui-tabs-indicator")[0],this.elems.links=[].slice.call(this.el.getElementsByClassName("ui-tabs-link")),this.elems.links.forEach(function(t,e){"true"==t.dataset.active&&(this.i=e)}.bind(this)),"string"==typeof c.container&&(this.elems.views=[].slice.call(this.elems.container.children),l.call(this),a.call(this),s.call(this),t.win.on("change:width",function(){l.call(this),a.call(this),s.call(this)}.bind(this))),this.el.addEventListener("click",n.bind(this),!1),i.call(this),e.call(this)};return o.prototype={_name:"tabs",attr_name:"data-ui-tabs",el:null,elems:{},i:0,views_width:0},o}(ui),function(t){function e(t){$(this);document.body.appendChild(l),r.innerHTML=t.target.getAttribute("data-ui-tooltip"),l.style.position="fixed",l.style.top=t.clientY+24+"px",l.style.left=t.clientX-12+"px"}function i(t){l.style.position=null,l.style.top=null,l.style.left=null,document.body.removeChild(l)}var n={top:"M19.678,23.84l-7.522-7.523c-0.049-0.039-0.107-0.063-0.156-0.063s-0.103,0.023-0.151,0.063L4.327,23.84 C4.231,23.926,4.146,24,4,24v1h16v-1C19.856,24,19.761,23.924,19.678,23.84z",right:"M1.16,20.178l7.523-7.521c0.039-0.049,0.063-0.107,0.063-0.156s-0.023-0.104-0.063-0.15L1.16,4.827 C1.074,4.731,1,4.646,1,4.5H0v16h1C1,20.355,1.076,20.261,1.16,20.178z",bottom:"M4.322,1.16l7.521,7.523C11.893,8.723,11.951,8.746,12,8.746s0.103-0.023,0.151-0.063l7.522-7.523 C19.77,1.074,19.854,1,20,1V0H4v1C4.145,1,4.239,1.076,4.322,1.16z",left:"M22.84,4.822l-7.523,7.521c-0.039,0.049-0.063,0.107-0.063,0.156s0.023,0.103,0.063,0.151l7.523,7.522 C22.926,20.27,23,20.354,23,20.5h1v-16h-1C23,4.645,22.924,4.739,22.84,4.822z"},s="http://www.w3.org/2000/svg",l=document.createElement("section"),a=document.createElementNS(s,"svg"),o=document.createElementNS(s,"g"),c=document.createElementNS(s,"path"),d=document.createElementNS(s,"rect"),r=document.createElement("div");return l.classList.add("c-tooltip"),a.classList.add("c-tooltip__caret"),a.classList.add("pos-top-left"),r.classList.add("c-tooltip__body"),a.setAttribute("width",24),a.setAttribute("height",25),c.setAttribute("d",n.top),c.setAttribute("fill","#455A64"),d.setAttribute("x",0),d.setAttribute("y",0),d.setAttribute("width",24),d.setAttribute("height",25),d.setAttribute("fill","none"),o.appendChild(c),o.appendChild(d),a.appendChild(o),l.appendChild(a),l.appendChild(r),{_name:"field",$elements:null,init:function(){this.$elements=$("*[data-ui-tooltip]"),this.$elements.on("mousemove",e),this.$elements.on("mouseleave",i)}}}(ui);