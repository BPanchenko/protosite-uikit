"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Number.prototype.ci||(Number.prototype.ci=function(t,e){e||(e=!0),t=t.split("|");var n=this.toString().substr(-2),o=e?this+" ":"";return o+t[0]+(/^[0,2-9]?[1]$/.test(n)?t[2]:/^[0,2-9]?[2-4]$/.test(n)?t[3]:t[1])}),Number.prototype.pad||(Number.prototype.pad=function(t){for(var e=this+"";e.length<t;)e="0"+e;return e}),Number.prototype.separate||(Number.prototype.separate=function(t,e){var n=(parseInt(e)||3,this+"");return n.replace(/\d(?=(\d{3})+[^\d])/g,"$&"+t)}),Number.prototype.toBoolean||(Number.prototype.toBoolean=function(){return!!+this}),Number.prototype.toWord||(Number.prototype.toWord=function(){function t(t,e){var n=e[0],o=e[1],i=e[2];return t%10==1&&t%100!=11?n:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?o:i}for(var e,n=this,o={0:{1:"один",2:"два",3:"три",4:"четыре",5:"пять",6:"шесть",7:"семь",8:"восемь",9:"девять",10:"десять",11:"одиннадцать",12:"двенадцать",13:"тринадцать",14:"четырнадцать",15:"пятнацать",16:"шестнадцать",17:"семнадцать",18:"восемнадцать",19:"девятнадцать",20:"двадцать",30:"тридцать",40:"сорок",50:"пятьдесят",60:"шестьдесят",70:"семьдесят",80:"восемьдесят",90:"девяносто",100:"сто",200:"двести",300:"триста",400:"четыреста",500:"пятьсот",600:"шестьсот",700:"семьсот",800:"восемьсот",900:"девятьсот"},1:{1:"одна",2:"две"}},i={0:["","",""],1:["тысяча","тысячи","тысяч"],2:["миллион","миллиона","миллионов"],3:["миллиард","миллиарда","миллиардов"],4:["триллион","триллиона","триллионов"],5:["квадриллион","квадриллиона","квадриллионов"],6:["квинтиллион","квинтиллиона","квинтиллионов"]},r="",s=((""+n).match(/(\d{1,3})(?=((\d{3})*([^\d]|$)))/g)||[]).reverse(),d=0;d<s.length;d++){for(var c=o[d],n=s[d],a="",l=0;l<n.length;l++){if(e=n.substr(l),c&&c[e]||o[0][e]){a=a+" "+(c&&c[e]||o[0][e]);break}e=+n.substr(l,1)*Math.pow(10,e.length-1),+e in o[0]&&(a=a+" "+o[0][e])}a&&(a=a+" "+t(+n,i[d]||i[0])),r=a+r}return r||"ноль"}),String.prototype.toBoolean||(String.prototype.toBoolean=function(){return["false","0",""].indexOf(this.toLowerCase())===-1}),_&&(s&&_.mixin(s.exports()),_.mixin({objectToQuery:function(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")},stringToObject:function(t){return t=t.replace(/'/g,'"'),t=t.replace(/([a-zA-Z0-9]+):/g,function(e,n,o){var i=t.substring(0,o).match(/"/g);return i&&i.length%2!==0?n+":":'"'+n+'":'}),JSON.parse(t)}})),function(t){var e={listenToAndRun:function(t,e,n){return this.listenTo.apply(this,arguments),n||"object"!==("undefined"==typeof e?"undefined":_typeof(e))||(n=this),n.call(this,t),this},onAndRun:function(t,e){return this.on.apply(this,arguments),e.call(this,this),this}};_.extend(t.Events,e),_.extend(t.Collection.prototype,e),_.extend(t.Model.prototype,e),_.extend(t.View.prototype,e),_.extend(t.View.prototype,{elems:{},tpl:"",template:function(){var t=this.model?this.model.toJSON():{};return _.template(this.tpl)(t)},render:function(){return this.el.innerHTML=_.result(this,"template"),this._initElems(),this.onRender&&this.onRender.call(this),this},_initElems:function(){return _.isEmpty(this.elems)?this:this.el instanceof HTMLElement?(this.__proto__.selectors||(this.__proto__.selectors=_.clone(this.elems)),_.each(this.selectors,function(t,e){_.isString(t)&&(this.elems[e]=this.el.getElementsByClassName(t),console.assert(this.elems[e].length,this._name+", element '"+t+"' was not found"),1==this.elems[e].length&&(this.elems[e]=this.elems[e][0]))},this),this):(console.trace("HTML-container is undefined"),this)}})}(Backbone),function(t,e){var n=window.UI=e.extend({},t.Events),o={};n.Component=function(t,n){console.assert(t instanceof HTMLElement,"A component element is not HTMLElement"),this.cid=e.uniqueId("component"),this.options=n||{},this.el=t,this._ensureElement(),this.initialize.apply(this,arguments),t["_ui"+this.name]=this},n.Component.extend=function(t,i){var r,s=this;return r=t&&e.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},e.extend(r,s,i),r.prototype=e.create(s.prototype,t),r.prototype.constructor=r,r.__super__=s.prototype,n[t.name]=r,i.selector&&(o[t.name]=i.selector),r},e.extend(n.Component.prototype,t.View.prototype)}(Backbone,_),function(t){t.backdrop=new(Backbone.View.extend({name:"BackdropView",tagName:"div",className:"c-backdrop",events:{click:function(t){this.trigger("click",this,t)}},show:function(t){return t||(t={}),document.body.appendChild(this.el),_.isNumber(t.opacity)&&(this.el.style.opacity=t.opacity),_.isNumber(t.zIndex)&&(this.el.style.zIndex=t.zIndex),this.trigger("show",this),this},hide:function(){return this.el.style.opacity=0,this.el.style.zIndex="",setTimeout(function(){this.el.style.opacity="",this.trigger("hide",this);try{document.body.removeChild(this.el)}catch(t){}}.bind(this),160),this}}))}(UI),function(t){t.window=new(Backbone.Model.extend({name:"WindowModel",defaults:{width:0,height:0},_origin:window})),t.container=new(Backbone.Model.extend({name:"ContainerModel",defaults:{width:0,height:0,format:""},initialize:function(){this.listenTo(t.window,"change:width",this.setFormat)},setFormat:function(){var e,n=t.window.get("width");return e=n>=1360?"xdesktop":n>=1180?"desktop":n>=1024?"tablet":n>=768?"tablet-portrait":n>=480?"handset":"handset-portrait",this.set({format:e,height:this.el.offsetHeight,width:this.el.offsetWidth})}}));var e=_.throttle(function(){t.window.set({width:window.innerWidth,height:window.innerHeight})},160);document.addEventListener("DOMContentLoaded",function(){window.UI.container.el=document.body.getElementsByClassName("u-container")[0]}),window.addEventListener("load",function(){window.addEventListener("resize",e,!1),e()},!1)}(UI),function(t){var e=document.documentElement;t.dom=_.extend({},Backbone.Events),t.dom.observer=new MutationObserver(function(n){var o={added:[],removed:[]};n.forEach(function(t){"childList"==t.type&&(o.added=o.added.concat([].slice.call(t.addedNodes)),o.removed=o.removed.concat([].slice.call(t.removedNodes)))}),t.dom.trigger("change",e,o)}),t.dom.on("ready",function(){t.dom.observer.observe(document.body,{childList:!0,subtree:!0})}),document.addEventListener("DOMContentLoaded",function(){t.dom.trigger("ready",e,{})})}(UI);