"use strict";!function(e){function t(e,t,a){if(!a)return t.classList.remove(l.valid,l.invalid),!0;var n=e.test(a);return n?(t.classList.add(l.valid),t.classList.remove(l.invalid)):(t.classList.remove(l.valid),t.classList.add(l.invalid)),n}function a(e){e instanceof Array&&e.forEach(function(e){return a(e)}),e instanceof HTMLElement&&(e.addEventListener("blur",u.blur),e.addEventListener("focus",u.focus),e.addEventListener("change",u.change),e.addEventListener("input",u.input),e.addEventListener("paste",u.change),e.__button&&e.__button.addEventListener("click",u.clickButton))}function n(e){return e.hasOwnProperty("__box")||!e.classList.contains(l.field)?e:(e.__box=e.parentNode.classList.contains(l.box)?e.parentNode:null,e.__box?(e.__error=e.__box.querySelector(o.error),e.__label=e.__box.querySelector(o.label),e.__mask=e.__box.querySelector(o.mask),e.__button=e.__box.querySelector(o.button),e.__button&&(e.__button.__field=e,e.__button.__icon=e.__button.querySelector(o.buttonIcon)),e):e)}function r(e){var t=[];return e instanceof HTMLCollection&&(e=Array.from(e)),e instanceof Array&&e.forEach(function(e){t=t.concat(r(e))}),e instanceof HTMLElement?(e.classList.contains(l.field)?t.push(n(e)):t=Array.from(e.querySelectorAll(o.field),n),t):t}var i=new RegExp("^([w-]+(?:.[w-]+)*)@((?:[w-]+.)*w[w-]{0,66}).([a-z]{2,6}(?:.[a-z]{2})?)$"),l=Object.create(null,{box:{value:"c-field-box"},button:{value:"c-field-button"},buttonIcon:{value:"iconic"},error:{value:"c-field-error"},field:{value:"c-field"},icon:{value:"c-field-icon"},mask:{value:"c-field-mask"},filled:{value:"is-filled"},focused:{value:"is-focused"},invalid:{value:"is-invalid"},valid:{value:"is-valid"}}),o=Object.create(null,{box:{value:"."+l.box},button:{value:"."+l.button},buttonIcon:{value:"."+l.buttonIcon},error:{value:"."+l.error},field:{value:"."+l.field},icon:{value:"."+l.icon},mask:{value:"."+l.mask},filled:{value:"."+l.filled},focused:{value:"."+l.focused}}),u=Object.create(null,{blur:{value:function e(t){var a=t.currentTarget.__box,e=t.currentTarget.value;a&&a.classList.remove(l.focused),a&&a.classList[e?"add":"remove"](l.filled)}},focus:{value:function(e){var t=e.currentTarget.__box;t&&t.classList.add(l.focused)}},change:{value:function e(a){var n=a.currentTarget;if(["file","email"].indexOf(n.type)!=-1||n.hasAttribute("pattern")){var r=n.__box,e=n.value.trim();if(!e)return void r.classList.remove("is-valid","is-invalid");if("file"==n.type)return void(n.__mask.innerHTML=e);var l=n.hasAttribute("pattern")?new RegExp(n.pattern):i;t(l,r,e)}}},clickButton:{value:function e(t){var a=t.currentTarget,n=a.__field;switch(n.type){case"password":var r=a.__icon;"eye-closed"==r.dataset.glyph?(r.dataset.glyph="eye-open",n.setAttribute("type","text")):"eye-open"==r.data("glyph")&&(r.dataset.glyph="eye-closed",n.setAttribute("type","password"));break;case"search":var i=n.__box,e=n.value.trim();e||i.classList.add(l.invalid)}}},input:{value:function(e){var a=e.currentTarget;a.hasAttribute("pattern")&&"email"!=a.type&&t(new RegExp(a.pattern),a.__box,a.value.trim())}}});e.dom.on("ready",function(e){a(r(e))}),e.dom.on("change",function(e,t){t.added.length&&a(r(t.added))})}(UI);