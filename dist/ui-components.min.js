"use strict";!function(e){function t(e,t,a){if(!a)return t.classList.remove(o.valid,o.invalid),!0;var n=e.test(a);return n?(t.classList.add(o.valid),t.classList.remove(o.invalid)):(t.classList.remove(o.valid),t.classList.add(o.invalid)),n}function a(e){e instanceof Array&&e.forEach(function(e){return a(e)}),e instanceof HTMLElement&&(e.addEventListener("blur",c.blur),e.addEventListener("focus",c.focus),e.addEventListener("change",c.change),e.addEventListener("input",c.input),e.addEventListener("paste",c.change),e.dispatchEvent(new Event("blur")),e.dispatchEvent(new Event("change")),e.__button&&e.__button.addEventListener("click",c.clickButton))}function n(e){return e.hasOwnProperty("__box")||!e.classList.contains(o.field)?e:(e.__box=e.parentNode.classList.contains(o.box)?e.parentNode:null,e.__box?(e.__error=e.__box.querySelector(u.error),e.__label=e.__box.querySelector(u.label),"file"==e.type&&(e.__fake=e.__box.querySelector(u.fieldFake)),e.__button=e.__box.querySelector(u.button),e.__button&&(e.__button.__field=e,e.__button.__icon=e.__button.querySelector(u.buttonIcon)),e):e)}function i(e){var t=[];return e instanceof HTMLCollection&&(e=Array.from(e)),e instanceof Array&&e.forEach(function(e){t=t.concat(i(e))}),e instanceof HTMLElement?(e.classList.contains(o.field)?t.push(n(e)):t=Array.from(e.querySelectorAll(u.field),n),t):t}var r=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/,l=/^\w{6,20}$/,o=Object.create(null,{box:{value:"c-field-box"},button:{value:"c-field-button"},buttonIcon:{value:"iconic"},error:{value:"c-field-error"},field:{value:"c-field"},icon:{value:"c-field-icon"},filled:{value:"is-filled"},focused:{value:"is-focused"},invalid:{value:"is-invalid"},valid:{value:"is-valid"}}),u=Object.create(null,{box:{value:"."+o.box},button:{value:"."+o.button},buttonIcon:{value:"."+o.buttonIcon},error:{value:"."+o.error},field:{value:"."+o.field+":not([type=checkbox]):not([type=radio])"},fieldFake:{value:".js-field-fake"},icon:{value:"."+o.icon},filled:{value:"."+o.filled},focused:{value:"."+o.focused}}),c=Object.create(null,{blur:{value:function e(t){var a=t.currentTarget.__box,e=t.currentTarget.value,n=e&&"0"!=e&&"null"!=e;a&&a.classList.remove(o.focused),a&&a.classList[n?"add":"remove"](o.filled)}},focus:{value:function(e){var t=e.currentTarget.__box;t&&t.classList.add(o.focused)}},change:{value:function e(a){var n=a.currentTarget;if(["file","email","password"].indexOf(n.type)!=-1||n.hasAttribute("pattern")){var i=n.__box,e=n.value.trim();if(!e)return void i.classList.remove("is-valid","is-invalid");if("file"==n.type)return void(n.__fake.value=e);var o=void 0;n.hasAttribute("pattern")?o=new RegExp(n.pattern):"email"==n.type?o=r:"password"==n.type&&(o=l),t(o,i,e)}}},clickButton:{value:function e(t){var a=t.currentTarget,n=a.__field;switch(n.type){case"search":var i=n.__box,e=n.value.trim();e||i.classList.add(o.invalid);break;default:var r=a.__icon;"eye-closed"==r.dataset.glyph?(r.dataset.glyph="eye-open",n.setAttribute("type","text")):"eye-open"==r.dataset.glyph&&(r.dataset.glyph="eye-closed",n.setAttribute("type","password"))}}},input:{value:function(e){var a=e.currentTarget;a.hasAttribute("pattern")&&["email","password"].indexOf(a.type)==-1&&t(new RegExp(a.pattern),a.__box,a.value.trim())}}});e.dom.on("ready",function(e){a(i(e))}),e.dom.on("change",function(e,t){t.added.length&&a(i(t.added))})}(UI);