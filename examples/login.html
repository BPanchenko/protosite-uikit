<!DOCTYPE html>
<html class="no-js" lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2, minimal-ui">

    <title>Protosite.UiKit</title>
    <meta name="author" content="Boris Panchenko, bp@bp-studio.ru">
    <meta name="copyright" content="">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <link rel="prefetch" href="/index.html">
    <link rel="prerender" href="/index.html">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Marck+Script|PT+Mono|PT+Serif+Caption|Open+Sans:400,400italic,600,600italic,300,700,800,300italic,800italic,700italic&subset=latin,cyrillic" as="css">

    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link rel="apple-touch-startup-image" href="/_res/img/icons/ios/startup.png">
    <link rel="apple-touch-icon" href="/_res/img/icons/ios/touch-icon-iphone.152x152.png">

    <!-- Framework styles -->
    <link rel="stylesheet/less" type="text/css" href="/css/core.less">

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.3/less.min.js" data-env="development"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>

</head>
<body>
<div class="o-container">
    <header role="banner">
        <div class="u-float-right">
            <a href="https://github.com/BPanchenko/protosite.uikit" target="_blank">
                <span aria-hidden="true" class="iconic" data-glyph="social-github"></span>
            </a>
        </div>
        <hgroup>
            <h1>Protosite.UiKit</h1>
        </hgroup>
    </header>

    <main role="main">

        <form class="js-form" onsubmit="return false;"></form>

        <script>
            var form = document.body.getElementsByClassName('js-form')[0];

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                var email = form.email.value.trim(),
                    password = form.password.value.trim();

                fetch('http://api.protosite.rocks/v1/users/auth/', {
                    credentials: 'include',
                    headers: {
                        'Content-type': "application/x-www-form-urlencoded; charset=UTF-8"
                    },
                    method: 'post',
                    mode: 'cors',
                    body: _.objectToQuery({
                        email: email,
                        password: password
                    }).replace('?', '')
                })
                    .then(function(response) {
                        return response.json();
                    })
                    .then(function(response) {
                        console.log('Request successful', response);
                        if(response.meta.code == 200) {
                            // TODO: сохранить куку и выполнить переход на сайт
                        }
                    })
                    .catch(function(error) {
                        console.trace(error)
                    });

                return;
            });
        </script>
    </main>

    <footer role="contentinfo" class="u-margin-large-top">
        <hr>
        <div class="u-float-right">
            <h4 class="u-font-cursive">&copy; <a href="http://www.bp-studio.ru" class="u-text-color">Boris Panchenko</a>, 2015&mdash;2016</h4>
        </div>
    </footer>
</div>
</body>
</html>